<!doctype html>
<html lang="en" data-theme="light">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>{% block title %}Personal Health Tracker{% endblock %}</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css" rel="stylesheet"/>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-base-200">
  <div class="navbar bg-base-100 shadow-sm sticky top-0 z-50">
    <div class="flex-1">
      <a href="{{ url_for('dashboard') }}" class="btn btn-ghost normal-case text-xl">Health Tracker</a>
    </div>
    <div class="flex-none gap-2 pr-3">
      {% if session.get('user_id') %}
        <a class="btn btn-ghost" href="{{ url_for('dashboard') }}">Dashboard</a>
        <div class="dropdown dropdown-end">
          <label tabindex="0" class="btn">Logs</label>
          <ul tabindex="0" class="dropdown-content z-50 menu p-2 shadow bg-base-100 rounded-box w-52">
            <li><a href="{{ url_for('meals') }}">Meal</a></li>
            <li><a href="{{ url_for('fitness') }}">Fitness</a></li>
            <li><a href="{{ url_for('sleep') }}">Sleep</a></li>
            <li><a href="{{ url_for('weight') }}">Weight</a></li>
          </ul>
        </div>
        <a class="btn btn-ghost" href="{{ url_for('charts') }}">Charts</a>
        <a class="btn btn-ghost" href="{{ url_for('goals') }}">Goals</a>
        <a class="btn btn-outline" href="{{ url_for('logout') }}">Logout</a>
      {% else %}
        <a class="btn btn-primary" href="{{ url_for('auth') }}">Login / Register</a>
      {% endif %}
    </div>
  </div>

  <main class="container mx-auto p-4">
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="space-y-2">
          {% for cat, msg in messages %}
            <div class="alert {{ 'alert-success' if cat=='success' else 'alert-error' if cat=='error' else 'alert-info' }}">
              <span>{{ msg }}</span>
            </div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}
    {% block content %}{% endblock %}
  </main>
</body>
</html>
